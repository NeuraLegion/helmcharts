# Karpenter Provider OCI
#
# Copyright (c) 2026 Oracle and/or its affiliates.
# Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl/

---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.20.0
  name: ocinodeclasses.oci.oraclecloud.com
spec:
  group: oci.oraclecloud.com
  names:
    categories:
    - karpenter
    kind: OCINodeClass
    listKind: OCINodeClassList
    plural: ocinodeclasses
    shortNames:
    - ocinc
    - ocincs
    singular: ocinodeclass
  scope: Cluster
  versions:
  - additionalPrinterColumns:
    - jsonPath: .status.conditions[?(@.type=="Ready")].status
      name: Ready
      type: string
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: OCINodeClass is the Schema for the ocinodeclasses API.
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: OCINodeClassSpec defines the desired state of OCINodeClass.
            properties:
              capacityReservationConfigs:
                description: CapacityReservationConfigs contains an array of capacity
                  reservations
                items:
                  description: CapacityReservationConfig define reference to a capacity
                    reservation
                  properties:
                    capacityReservationFilter:
                      description: CapacityReservation filter, must match exactly
                        one capacityReservation
                      properties:
                        compartmentId:
                          description: CompartmentId restrict resource owning compartment
                          type: string
                        definedTags:
                          additionalProperties:
                            additionalProperties:
                              type: string
                            type: object
                          description: DefinedTags is optional to match OCI resources
                            by defined tags
                          type: object
                        displayName:
                          description: DisplayName is optional to exactly match OCI
                            resources by name
                          type: string
                        freeformTags:
                          additionalProperties:
                            type: string
                          description: FreeformTags is optional to match OCI resources
                            by free-form tags
                          type: object
                      type: object
                      x-kubernetes-validations:
                      - message: expected at least one, got none, ['displayName',
                          'freeformTags', 'definedTags']
                        rule: has(self.displayName) || has(self.freeformTags) || has(self.definedTags)
                    capacityReservationId:
                      description: CapacityReservation ocid
                      type: string
                  type: object
                  x-kubernetes-validations:
                  - message: must specify exactly one of ['capacityReservationFilter',
                      'capacityReservationId']
                    rule: has(self.capacityReservationId) && !has(self.capacityReservationFilter)
                      || !has(self.capacityReservationId) && has(self.capacityReservationFilter)
                type: array
              clusterPlacementGroupConfigs:
                description: ClusterPlacementGroupConfigs contains an array of cluster
                  placement group.
                items:
                  description: ClusterPlacementGroupConfig define reference to a cluster
                    placement group
                  properties:
                    clusterPlacementGroupFilter:
                      description: ClusterPlacementGroup filter, must match exactly
                        one clusterPlacementGroup
                      properties:
                        compartmentId:
                          description: CompartmentId restrict resource owning compartment
                          type: string
                        definedTags:
                          additionalProperties:
                            additionalProperties:
                              type: string
                            type: object
                          description: DefinedTags is optional to match OCI resources
                            by defined tags
                          type: object
                        displayName:
                          description: DisplayName is optional to exactly match OCI
                            resources by name
                          type: string
                        freeformTags:
                          additionalProperties:
                            type: string
                          description: FreeformTags is optional to match OCI resources
                            by free-form tags
                          type: object
                      type: object
                    clusterPlacementGroupId:
                      description: ClusterPlacementGroupId ocid
                      type: string
                  type: object
                  x-kubernetes-validations:
                  - message: must specify exactly one of ['clusterPlacementGroupId',
                      'clusterPlacementGroupFilter']
                    rule: has(self.clusterPlacementGroupId) && !has(self.clusterPlacementGroupFilter)
                      || !has(self.clusterPlacementGroupId) && has(self.clusterPlacementGroupFilter)
                type: array
              computeClusterConfig:
                description: |-
                  ComputeClusterConfig refers to a compute cluster. It is fully immutable once set and cannot be
                  modified or deleted after creation, as changing the compute cluster has severe consequences.
                properties:
                  computeClusterFilter:
                    description: ComputeCluster filter, must match exactly one computeCluster
                    properties:
                      compartmentId:
                        description: CompartmentId restrict resource owning compartment
                        type: string
                      definedTags:
                        additionalProperties:
                          additionalProperties:
                            type: string
                          type: object
                        description: DefinedTags is optional to match OCI resources
                          by defined tags
                        type: object
                      displayName:
                        description: DisplayName is optional to exactly match OCI
                          resources by name
                        type: string
                      freeformTags:
                        additionalProperties:
                          type: string
                        description: FreeformTags is optional to match OCI resources
                          by free-form tags
                        type: object
                    type: object
                    x-kubernetes-validations:
                    - message: expected at least one, got none, ['displayName', 'freeformTags',
                        'definedTags']
                      rule: has(self.displayName) || has(self.freeformTags) || has(self.definedTags)
                  computeClusterId:
                    description: ComputeCluster ocid
                    type: string
                type: object
                x-kubernetes-validations:
                - message: computeClusterConfig is immutable once set
                  rule: self == oldSelf
                - message: must specify exactly one of ['computeClusterFilter', 'computeClusterId']
                  rule: has(self.computeClusterId) && !has(self.computeClusterFilter)
                    || !has(self.computeClusterId) && has(self.computeClusterFilter)
              definedTags:
                additionalProperties:
                  additionalProperties:
                    type: string
                  type: object
                description: DefinedTags is customer owned namespace key/value labels
                  passed into compute instance
                type: object
              freeformTags:
                additionalProperties:
                  type: string
                description: FreeformTags is customer owned key/value labels passed
                  into compute instance
                type: object
              kubeletConfig:
                description: KubeletConfig configuration gives customer finer control
                  on parameters pass into kubelet process
                properties:
                  clusterDNS:
                    description: |-
                      ClusterDNS is a list of IP addresses for the cluster DNS server.
                      Note that not all providers may use all addresses.
                    items:
                      type: string
                    type: array
                  evictionHard:
                    additionalProperties:
                      type: string
                    description: EvictionHard is the map of signal names to quantities
                      that define hard eviction thresholds
                    type: object
                    x-kubernetes-validations:
                    - message: valid keys for evictionHard are ['memory.available','nodefs.available','nodefs.inodesFree','imagefs.available','imagefs.inodesFree','pid.available']
                      rule: self.all(x, x in ['memory.available','nodefs.available','nodefs.inodesFree','imagefs.available','imagefs.inodesFree','pid.available'])
                  evictionMaxPodGracePeriod:
                    description: |-
                      EvictionMaxPodGracePeriod is the maximum allowed grace period (in seconds) to use when terminating pods in
                      response to soft eviction thresholds being met.
                    format: int32
                    type: integer
                  evictionSoft:
                    additionalProperties:
                      type: string
                    description: EvictionSoft is the map of signal names to quantities
                      that define soft eviction thresholds
                    type: object
                    x-kubernetes-validations:
                    - message: valid keys for evictionSoft are ['memory.available','nodefs.available','nodefs.inodesFree','imagefs.available','imagefs.inodesFree','pid.available']
                      rule: self.all(x, x in ['memory.available','nodefs.available','nodefs.inodesFree','imagefs.available','imagefs.inodesFree','pid.available'])
                  evictionSoftGracePeriod:
                    additionalProperties:
                      type: string
                    description: EvictionSoftGracePeriod is the map of signal names
                      to quantities that define grace periods for each eviction signal
                    type: object
                    x-kubernetes-validations:
                    - message: valid keys for evictionSoftGracePeriod are ['memory.available','nodefs.available','nodefs.inodesFree','imagefs.available','imagefs.inodesFree','pid.available']
                      rule: self.all(x, x in ['memory.available','nodefs.available','nodefs.inodesFree','imagefs.available','imagefs.inodesFree','pid.available'])
                  extraArgs:
                    description: ExtraArgs is a placeholder for other attributes that
                      not listed here.
                    type: string
                  imageGCHighThresholdPercent:
                    description: |-
                      ImageGCHighThresholdPercent is the percent of disk usage after which image
                      garbage collection is always run. The percent is calculated by dividing this
                      field value by 100, so this field must be between 0 and 100, inclusive.
                      When specified, the value must be greater than ImageGCLowThresholdPercent.
                    format: int32
                    maximum: 100
                    minimum: 0
                    type: integer
                  imageGCLowThresholdPercent:
                    description: |-
                      ImageGCLowThresholdPercent is the percent of disk usage before which image
                      garbage collection is never run. Lowest disk usage to garbage collect to.
                      The percent is calculated by dividing this field value by 100,
                      so the field value must be between 0 and 100, inclusive.
                      When specified, the value must be less than imageGCHighThresholdPercent
                    format: int32
                    maximum: 100
                    minimum: 0
                    type: integer
                  kubeReserved:
                    additionalProperties:
                      type: string
                    description: KubeReserved contains resources reserved for Kubernetes
                      system components.
                    type: object
                    x-kubernetes-validations:
                    - message: valid keys for kubeReserved are ['cpu','memory','ephemeral-storage','pid']
                      rule: self.all(x, x=='cpu' || x=='memory' || x=='ephemeral-storage'
                        || x=='pid')
                    - message: kubeReserved value cannot be a negative resource quantity
                      rule: self.all(x, !self[x].startsWith('-'))
                  maxPods:
                    description: |-
                      MaxPods is an override for the maximum number of pods that can run on
                      a worker node instance.
                    format: int32
                    minimum: 1
                    type: integer
                  nodeLabels:
                    additionalProperties:
                      type: string
                    description: NodeLabels is extra labels to pass into kubelet as
                      initial node labels.
                    type: object
                  podsPerCore:
                    description: |-
                      PodsPerCore is an override for the number of pods that can run on a worker node
                      instance based on the number of cpu cores. This value cannot exceed MaxPods, so, if
                      MaxPods is a lower value, that value will be used.
                    format: int32
                    minimum: 0
                    type: integer
                  systemReserved:
                    additionalProperties:
                      type: string
                    description: SystemReserved contains resources reserved for OS
                      system daemons and kernel memory.
                    type: object
                    x-kubernetes-validations:
                    - message: valid keys for systemReserved are ['cpu','memory','ephemeral-storage','pid']
                      rule: self.all(x, x=='cpu' || x=='memory' || x=='ephemeral-storage'
                        || x=='pid')
                    - message: systemReserved value cannot be a negative resource
                        quantity
                      rule: self.all(x, !self[x].startsWith('-'))
                type: object
                x-kubernetes-validations:
                - message: podsPerCore value cannot exceed maxPods
                  rule: (has(self.maxPods) && has(self.podsPerCore) && (self.maxPods
                    >= self.podsPerCore)) || (has(self.maxPods) && !has(self.podsPerCore))
                    || (!has(self.maxPods) && has(self.podsPerCore)) || (!has(self.maxPods)
                    && !has(self.podsPerCore))
              launchOptions:
                description: LaunchOptions gives advanced control of volume, network,
                  firmware and etc. of compute instance
                properties:
                  bootVolumeType:
                    description: BootVolumeType defines type of boot volume, accepts
                      any of ISCSI|SCSI|IDE|VFIO|PARAVIRTUALIZED
                    type: string
                  consistentVolumeNamingEnabled:
                    description: Whether to enable consistent volume naming feature.
                      Defaults to false.
                    type: boolean
                  firmware:
                    description: Firmware defines kind of firmware, accepts any of
                      BIOS|UEFI_64
                    type: string
                  networkType:
                    description: NetworkType defines emulation type of physical network
                      interface card, accepts any of VFIO|E1000|PARAVIRTUALIZED
                    type: string
                  remoteDataVolumeType:
                    description: RemoteDataVolumeType defines type of remote data
                      volume, accepts any of ISCSI|SCSI|IDE|VFIO|PARAVIRTUALIZED
                    type: string
                type: object
              metadata:
                additionalProperties:
                  type: string
                description: Metadata is usr_data passed into compute instance
                type: object
              networkConfig:
                description: NetworkConfig defines vnic subnet and optional network
                  security groups for compute instance
                properties:
                  primaryVnicConfig:
                    description: PrimaryVnicConfig is required to configure the primary
                      vnic's subnet and optional network security groups
                    properties:
                      assignIpV6Ip:
                        description: AssignIpV6Ip flag for whether assign IpV6 IPs
                          or not
                        type: boolean
                      assignPublicIp:
                        description: AssignPublicIp flag for whether assign public
                          IPs or not. If it is true, the subnet must be a public subnet
                        type: boolean
                      ipv6AddressIpv6SubnetCidrPairDetails:
                        description: Ipv6AddressIpv6SubnetCidrPairDetails list of
                          IpV6 subnet cider and address pairs
                        items:
                          description: Ipv6AddressIpv6SubnetCidrPairDetails IpV6 subnet
                            cider and address pairs
                          properties:
                            ipv6SubnetCidr:
                              description: SubnetCidr ipv6SubnetCidr string
                              type: string
                          type: object
                        type: array
                      networkSecurityGroupConfigs:
                        description: NetworkSecurityGroupConfigs selects an array
                          of network security groups
                        items:
                          description: NetworkSecurityGroupConfig selects an array
                            of network security group resources
                          properties:
                            networkSecurityGroupFilter:
                              description: NetworkSecurityGroupFilter defines a network
                                security group filter
                              properties:
                                compartmentId:
                                  description: CompartmentId restrict resource owning
                                    compartment
                                  type: string
                                definedTags:
                                  additionalProperties:
                                    additionalProperties:
                                      type: string
                                    type: object
                                  description: DefinedTags is optional to match OCI
                                    resources by defined tags
                                  type: object
                                displayName:
                                  description: DisplayName is optional to exactly
                                    match OCI resources by name
                                  type: string
                                freeformTags:
                                  additionalProperties:
                                    type: string
                                  description: FreeformTags is optional to match OCI
                                    resources by free-form tags
                                  type: object
                              type: object
                            networkSecurityGroupId:
                              description: NetworkSecurityGroupIds defines an array
                                of network security group ids
                              type: string
                          type: object
                          x-kubernetes-validations:
                          - message: must specify exactly one of ['networkSecurityGroupId',
                              'networkSecurityGroupFilter']
                            rule: has(self.networkSecurityGroupId) && !has(self.networkSecurityGroupFilter)
                              || !has(self.networkSecurityGroupId) && has(self.networkSecurityGroupFilter)
                        type: array
                      securityAttributes:
                        additionalProperties:
                          additionalProperties:
                            type: string
                          type: object
                        description: SecurityAttributes map of security attributes
                        type: object
                      skipSourceDestCheck:
                        description: SkipSourceDestCheck flag for whether skip source
                          dest check
                        type: boolean
                      subnetConfig:
                        description: SubnetConfig selects a subnet by subnetId or
                          subnetFilter
                        properties:
                          subnetFilter:
                            description: Subnet filter, must match exactly one subnet
                            properties:
                              compartmentId:
                                description: CompartmentId restrict resource owning
                                  compartment
                                type: string
                              definedTags:
                                additionalProperties:
                                  additionalProperties:
                                    type: string
                                  type: object
                                description: DefinedTags is optional to match OCI
                                  resources by defined tags
                                type: object
                              displayName:
                                description: DisplayName is optional to exactly match
                                  OCI resources by name
                                type: string
                              freeformTags:
                                additionalProperties:
                                  type: string
                                description: FreeformTags is optional to match OCI
                                  resources by free-form tags
                                type: object
                            type: object
                            x-kubernetes-validations:
                            - message: expected at least one, got none, ['displayName',
                                'freeformTags', 'definedTags']
                              rule: has(self.displayName) || has(self.freeformTags)
                                || has(self.definedTags)
                          subnetId:
                            description: Subnet ocid
                            type: string
                        type: object
                        x-kubernetes-validations:
                        - message: must specify exactly one of ['subnetFilter', 'subnetId']
                          rule: has(self.subnetId) && !has(self.subnetFilter) || !has(self.subnetId)
                            && has(self.subnetFilter)
                      vnicDisplayname:
                        description: VnicDisplayname display name for the vnic
                        maxLength: 255
                        minLength: 1
                        type: string
                    required:
                    - subnetConfig
                    type: object
                  secondaryVnicConfigs:
                    description: SecondaryVnicConfig secondaryVnicConfigs
                    items:
                      description: SecondaryVnicConfig defines subnet and optional
                        network security groups
                      properties:
                        applicationResource:
                          description: ApplicationResource optional application identifier
                            assigned to a vnic
                          type: string
                        assignIpV6Ip:
                          description: AssignIpV6Ip flag for whether assign IpV6 IPs
                            or not
                          type: boolean
                        assignPublicIp:
                          description: AssignPublicIp flag for whether assign public
                            IPs or not. If it is true, the subnet must be a public
                            subnet
                          type: boolean
                        ipCount:
                          description: |-
                            IpCount defines max number of IPs can be placed on a single vnic, the number should be to the power of 2.
                            For a OciIpNative CNI cluster, a pod will have its own unique IP. OCI compute shapes can have multiple vnics,
                            and there is a primary vnic reserved for node <--> api server communication. Seconds vnics can be used for pods,
                            and each vnic can allocate 16 IPs. When it is configured, those compute shapes that do not have enough vnics are filtered out.
                          maximum: 16
                          minimum: 1
                          type: integer
                        ipv6AddressIpv6SubnetCidrPairDetails:
                          description: Ipv6AddressIpv6SubnetCidrPairDetails list of
                            IpV6 subnet cider and address pairs
                          items:
                            description: Ipv6AddressIpv6SubnetCidrPairDetails IpV6
                              subnet cider and address pairs
                            properties:
                              ipv6SubnetCidr:
                                description: SubnetCidr ipv6SubnetCidr string
                                type: string
                            type: object
                          type: array
                        networkSecurityGroupConfigs:
                          description: NetworkSecurityGroupConfigs selects an array
                            of network security groups
                          items:
                            description: NetworkSecurityGroupConfig selects an array
                              of network security group resources
                            properties:
                              networkSecurityGroupFilter:
                                description: NetworkSecurityGroupFilter defines a
                                  network security group filter
                                properties:
                                  compartmentId:
                                    description: CompartmentId restrict resource owning
                                      compartment
                                    type: string
                                  definedTags:
                                    additionalProperties:
                                      additionalProperties:
                                        type: string
                                      type: object
                                    description: DefinedTags is optional to match
                                      OCI resources by defined tags
                                    type: object
                                  displayName:
                                    description: DisplayName is optional to exactly
                                      match OCI resources by name
                                    type: string
                                  freeformTags:
                                    additionalProperties:
                                      type: string
                                    description: FreeformTags is optional to match
                                      OCI resources by free-form tags
                                    type: object
                                type: object
                              networkSecurityGroupId:
                                description: NetworkSecurityGroupIds defines an array
                                  of network security group ids
                                type: string
                            type: object
                            x-kubernetes-validations:
                            - message: must specify exactly one of ['networkSecurityGroupId',
                                'networkSecurityGroupFilter']
                              rule: has(self.networkSecurityGroupId) && !has(self.networkSecurityGroupFilter)
                                || !has(self.networkSecurityGroupId) && has(self.networkSecurityGroupFilter)
                          type: array
                        nicIndex:
                          description: 'NicIndex 0 | 1 #vnic provision slot for bm
                            hosts that have multiple cavium cards'
                          type: integer
                        securityAttributes:
                          additionalProperties:
                            additionalProperties:
                              type: string
                            type: object
                          description: SecurityAttributes map of security attributes
                          type: object
                        skipSourceDestCheck:
                          description: SkipSourceDestCheck flag for whether skip source
                            dest check
                          type: boolean
                        subnetConfig:
                          description: SubnetConfig selects a subnet by subnetId or
                            subnetFilter
                          properties:
                            subnetFilter:
                              description: Subnet filter, must match exactly one subnet
                              properties:
                                compartmentId:
                                  description: CompartmentId restrict resource owning
                                    compartment
                                  type: string
                                definedTags:
                                  additionalProperties:
                                    additionalProperties:
                                      type: string
                                    type: object
                                  description: DefinedTags is optional to match OCI
                                    resources by defined tags
                                  type: object
                                displayName:
                                  description: DisplayName is optional to exactly
                                    match OCI resources by name
                                  type: string
                                freeformTags:
                                  additionalProperties:
                                    type: string
                                  description: FreeformTags is optional to match OCI
                                    resources by free-form tags
                                  type: object
                              type: object
                              x-kubernetes-validations:
                              - message: expected at least one, got none, ['displayName',
                                  'freeformTags', 'definedTags']
                                rule: has(self.displayName) || has(self.freeformTags)
                                  || has(self.definedTags)
                            subnetId:
                              description: Subnet ocid
                              type: string
                          type: object
                          x-kubernetes-validations:
                          - message: must specify exactly one of ['subnetFilter',
                              'subnetId']
                            rule: has(self.subnetId) && !has(self.subnetFilter) ||
                              !has(self.subnetId) && has(self.subnetFilter)
                        vnicDisplayname:
                          description: VnicDisplayname display name for the vnic
                          maxLength: 255
                          minLength: 1
                          type: string
                      required:
                      - subnetConfig
                      type: object
                    maxItems: 64
                    minItems: 0
                    type: array
                required:
                - primaryVnicConfig
                type: object
              nodeCompartmentId:
                description: NodeCompartmentId is optional to place instance in a
                  different compartment from the cluster
                type: string
              postBootstrapInitScript:
                description: PostBootstrapInitScript is an optional base64 encoded
                  script to run after OKE bootstrapping
                type: string
              preBootstrapInitScript:
                description: PreBootstrapInitScript is an optional base64 encoded
                  script to run before OKE bootstrapping
                type: string
              shapeConfigs:
                description: |-
                  ShapeConfigs is additional shape config applies to flexible and burstable config
                  without specifying it, flexible and burstable shapes are excluded from scheduling consideration.
                  Different from other cloud providers, our flexible/burstable options are not offered as
                  individual shapes, thus we cannot expose one instance type with dynamic pricing and
                  allocatable resources.
                items:
                  properties:
                    baselineOcpuUtilization:
                      description: |-
                        BaselineOcpuUtilization control utilization ratio on burstable shapes
                        accepted values is [BASELINE_1_8, BASELINE_1_2, BASELINE_1_1], only specify it in need.
                      enum:
                      - BASELINE_1_8
                      - BASELINE_1_2
                      - BASELINE_1_1
                      type: string
                    memoryInGbs:
                      description: |-
                        MemoryInGbs control number of memory in GBs on flexible shapes
                        when neither Ocpu nor MemoryInGbs is specified, flexible shapes are not considered as available offering
                        minimum value is 1, and need be an integer, where maximum value varies by shapes.
                      minimum: 1
                      type: number
                    ocpus:
                      description: |-
                        Ocpus control number of opcu on flexible shapes
                        when neither Ocpu nor MemoryInGbs is specified, flexible shapes are not considered as available offering
                        minimum value is 1, and need be an integer, where maximum value varies by shapes.
                      minimum: 1
                      type: number
                  type: object
                type: array
              sshAuthorizedKeys:
                description: SshAuthorizedKeys is authorized Ssh public keys thag
                  passed into compute instance.
                items:
                  type: string
                type: array
              volumeConfig:
                description: |-
                  VolumeConfig contains required configuration for boot volume of a worker node, and optional configurations for
                  additional volumes to be attached during worker node instance launch
                properties:
                  bootVolumeConfig:
                    description: BootVolumeConfig contains all configurations to configure
                      boot volume of an oci compute instance
                    properties:
                      imageConfig:
                        description: ImageConfig defines reference to image(s) via
                          an OCID or an image filter.
                        properties:
                          imageFilter:
                            description: ImageFilter select a set of images
                            properties:
                              compartmentId:
                                type: string
                              definedTags:
                                additionalProperties:
                                  additionalProperties:
                                    type: string
                                  type: object
                                type: object
                              freeformTags:
                                additionalProperties:
                                  type: string
                                type: object
                              osFilter:
                                type: string
                              osVersionFilter:
                                type: string
                            required:
                            - osFilter
                            - osVersionFilter
                            type: object
                          imageId:
                            description: ImageId select a specific image by OCID
                            type: string
                          imageType:
                            description: |-
                              ImageType is mandatory to configure and initialize bootstrap process correctly on a worker node, it accepts
                              "OKEImage", "Platform" or "Custom"
                            type: string
                        required:
                        - imageType
                        type: object
                        x-kubernetes-validations:
                        - message: must specify exactly one of ['imageFilter', 'imageId']
                          rule: has(self.imageId) && !has(self.imageFilter) || !has(self.imageId)
                            && has(self.imageFilter)
                      kmsKeyConfig:
                        description: KmsKeyConfig defines reference to a kms key via
                          an OCID.
                        properties:
                          kmsKeyId:
                            description: KmsKeyId refers to a KmsKey by OCID to encrypt
                              volume
                            type: string
                        type: object
                      pvEncryptionInTransit:
                        description: PvEncryptionInTransit configures the "isPvEncryptionInTransitEnabled"
                          bool flag
                        type: boolean
                      sizeInGBs:
                        description: SizeInGBs is the size of the volume in GB.
                        format: int64
                        minimum: 1
                        type: integer
                      vpusPerGB:
                        description: VpusPerGB configures number of volume performance
                          units (VPUs) that will be applied to this volume per GB
                        format: int64
                        type: integer
                        x-kubernetes-validations:
                        - message: VpusPerGB must be 10, 20, or between 30 and 120
                          rule: self == 10 || self == 20 || (self >= 30 && self <=
                            120)
                    required:
                    - imageConfig
                    type: object
                required:
                - bootVolumeConfig
                type: object
            required:
            - networkConfig
            - volumeConfig
            type: object
            x-kubernetes-validations:
            - message: At most one of capacityReservationConfigs, clusterPlacementGroupConfigs,
                or computeClusterConfig may be set
              rule: '((has(self.capacityReservationConfigs) && self.capacityReservationConfigs.size()
                > 0 ? 1 : 0) + (has(self.clusterPlacementGroupConfigs) && self.clusterPlacementGroupConfigs.size()
                > 0 ? 1 : 0) + (has(self.computeClusterConfig) && self.computeClusterConfig
                != null ? 1 : 0)) <= 1'
            - message: computeClusterConfig is immutable once set
              rule: '!(has(oldSelf.computeClusterConfig) && oldSelf.computeClusterConfig
                != null) || (has(self.computeClusterConfig) && self.computeClusterConfig
                != null && self.computeClusterConfig == oldSelf.computeClusterConfig)'
          status:
            description: OCINodeClassStatus defines the observed state of OCINodeClass.
            properties:
              capacityReservations:
                items:
                  properties:
                    availabilityDomain:
                      type: string
                    capacityReservationId:
                      type: string
                    displayName:
                      type: string
                  type: object
                type: array
              clusterPlacementGroups:
                items:
                  properties:
                    availabilityDomain:
                      type: string
                    clusterPlacementGroupId:
                      type: string
                    displayName:
                      type: string
                  type: object
                type: array
              computeCluster:
                properties:
                  ComputeClusterId:
                    type: string
                  availabilityDomain:
                    type: string
                  displayName:
                    type: string
                type: object
              conditions:
                description: |-
                  INSERT ADDITIONAL STATUS FIELD - define observed state of cluster
                  Important: Run "make" to regenerate code after modifying this file
                items:
                  description: Condition aliases the upstream type and adds additional
                    helper methods
                  properties:
                    lastTransitionTime:
                      description: |-
                        lastTransitionTime is the last time the condition transitioned from one status to another.
                        This should be when the underlying condition changed.  If that is not known, then using the time when the API field changed is acceptable.
                      format: date-time
                      type: string
                    message:
                      description: |-
                        message is a human readable message indicating details about the transition.
                        This may be an empty string.
                      maxLength: 32768
                      type: string
                    observedGeneration:
                      description: |-
                        observedGeneration represents the .metadata.generation that the condition was set based upon.
                        For instance, if .metadata.generation is currently 12, but the .status.conditions[x].observedGeneration is 9, the condition is out of date
                        with respect to the current state of the instance.
                      format: int64
                      minimum: 0
                      type: integer
                    reason:
                      description: |-
                        reason contains a programmatic identifier indicating the reason for the condition's last transition.
                        Producers of specific condition types may define expected values and meanings for this field,
                        and whether the values are considered a guaranteed API.
                        The value should be a CamelCase string.
                        This field may not be empty.
                      maxLength: 1024
                      minLength: 1
                      pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                      type: string
                    status:
                      description: status of the condition, one of True, False, Unknown.
                      enum:
                      - "True"
                      - "False"
                      - Unknown
                      type: string
                    type:
                      description: type of condition in CamelCase or in foo.example.com/CamelCase.
                      maxLength: 316
                      pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                      type: string
                  required:
                  - lastTransitionTime
                  - message
                  - reason
                  - status
                  - type
                  type: object
                type: array
              network:
                properties:
                  primaryVnic:
                    properties:
                      networkSecurityGroups:
                        items:
                          properties:
                            displayName:
                              type: string
                            networkSecurityGroupId:
                              type: string
                          type: object
                        type: array
                      subnet:
                        properties:
                          displayName:
                            type: string
                          subnetId:
                            type: string
                        type: object
                    type: object
                  secondaryVnics:
                    items:
                      properties:
                        networkSecurityGroups:
                          items:
                            properties:
                              displayName:
                                type: string
                              networkSecurityGroupId:
                                type: string
                            type: object
                          type: array
                        subnet:
                          properties:
                            displayName:
                              type: string
                            subnetId:
                              type: string
                          type: object
                      type: object
                    type: array
                type: object
              volume:
                properties:
                  images:
                    items:
                      properties:
                        displayName:
                          type: string
                        imageId:
                          type: string
                      type: object
                    type: array
                  kmsKey:
                    items:
                      properties:
                        displayName:
                          type: string
                        kmsKeyId:
                          type: string
                      type: object
                    type: array
                type: object
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
